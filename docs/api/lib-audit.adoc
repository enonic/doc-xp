= Audit Library
:toc: right
:imagesdir: ../images

NOTE: This library was first introduced in v7.2

This library contains audit logging functions.

== Usage

Add the following into your `build.gradle` file:

[source,groovy]
----
dependencies {
  include "com.enonic.xp:lib-audit:${xpVersion}"
}
----

In your JavaScript controller, add a require statement:

[source,js]
----
const authLib = require('/lib/xp/audit');
----

You are now free to use the library functionality.


== Functions

=== find

This function searches for audit logs.

[.lead]
Parameters

[%header,cols="1%,1%,98%a"]
[frame="none"]
[grid="none"]
|===
| Name | Kind | Details
| params | object | <optional> | Input parameters as JSON
|===

[.lead]
Returns

*Object* : Audit log search results.

=== get

This function fetches an audit log.

[.lead]
Parameters

[%header,cols="1%,1%,98%a"]
[frame="none"]
[grid="none"]
|===
| Name | Kind | Details
| id | string | Id of the audit log.
|===

[.lead]
Returns

*Object* : Audit log as JSON.

=== log

This function creates a single audit log entry.

[.lead]
Parameters

[%header,cols="1%,1%,98%a"]
[frame="none"]
[grid="none"]
|===
| Name | Kind | Details
| type | string | Type of log entry.
| time | string | Log entry timestamp. Defaults to now.
| source | string | Log entry source. Defaults to the application ID.
| user | string | Log entry user. Defaults to the user of current context.
| objects | array | URIs to objects that relate to this log entry. Defaults to empty array.
| data | object | Custom extra data for the this log entry. Defaults to empty object.
|===

[.lead]
Returns

*Object* : Audit log as JSON.
